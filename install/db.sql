CREATE TABLE IF NOT EXISTS `rb_allegati_registro_docente` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `registro` int(11) NOT NULL,  `file` varchar(150) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_alunni` (  `id_alunno` int(11) NOT NULL AUTO_INCREMENT,  `username` varchar(20) DEFAULT NULL,  `password` varchar(32) DEFAULT NULL,  `cognome` varchar(200) NOT NULL,  `nome` varchar(200) NOT NULL,  `data_nascita` date DEFAULT NULL,  `luogo_nascita` varchar(250) DEFAULT NULL,  `codice_fiscale` char(16) CHARACTER SET latin1 DEFAULT NULL,  `sesso` char(1) CHARACTER SET latin1 NOT NULL DEFAULT '',  `id_classe` int(11) DEFAULT NULL,  `nickname` varchar(25) DEFAULT NULL,  `attivo` char(1) CHARACTER SET latin1 NOT NULL DEFAULT '1',  `accessi` int(11) NOT NULL DEFAULT '0',  `stile` smallint(6) DEFAULT '0',  `ripetente` tinyint(1) NOT NULL DEFAULT '0',  `legge104` int(11) DEFAULT NULL,  PRIMARY KEY (`id_alunno`),  UNIQUE KEY `uniq_cf` (`codice_fiscale`),  UNIQUE KEY `unq_uname` (`username`),  KEY `idx_classe` (`id_classe`),  KEY `idx_cognome` (`cognome`),  KEY `idx_nome` (`nome`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_anni` (  `id_anno` int(11) NOT NULL AUTO_INCREMENT,  `descrizione` char(9) NOT NULL,  `data_inizio` date NOT NULL,  `data_fine` date NOT NULL,  `fine_quadrimestre` date DEFAULT NULL,  `data_inizio_lezioni` date NOT NULL,  `data_termine_lezioni` date NOT NULL,  `vacanze` text,  PRIMARY KEY (`id_anno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_aree` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `nome` varchar(50) NOT NULL,  `attivo` tinyint(1) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;
INSERT INTO `rb_aree` (`id`, `nome`, `attivo`) VALUES (1, 'docenti', 1),(2, 'genitori', 0),(3, 'alunni', 0),(4, 'segreteria', 0),(5, 'dirigente scolastico', 0),(6, 'admin', 1);
CREATE TABLE IF NOT EXISTS `rb_assegnazione_sostegno` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `docente` int(11) NOT NULL,  `ore` int(11) NOT NULL,  `alunno` int(11) DEFAULT NULL,  `progressivo_classe` int(11) NOT NULL DEFAULT '1' COMMENT 'indice del docente di sostegno, se nella classe ne sono presenti diversi',  PRIMARY KEY (`id`),  UNIQUE KEY `unq_doc` (`anno`,`classe`,`docente`,`alunno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_attivita_sostegno` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `alunno` int(11) NOT NULL,  `data` date NOT NULL,  `attivita` text NOT NULL,  `anno` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_categorie_docs` (  `id_categoria` smallint(6) NOT NULL AUTO_INCREMENT,  `tipo_documento` smallint(6) NOT NULL,  `codice` varchar(3) NOT NULL,  `nome` varchar(50) NOT NULL,  `descrizione` text NOT NULL,  PRIMARY KEY (`id_categoria`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=17;
INSERT INTO `rb_categorie_docs` (`id_categoria`, `tipo_documento`, `codice`, `nome`, `descrizione`) VALUES (1, 4, 'VA', 'Valutazione', 'Documenti sulla valutazione'),(2, 4, 'MS', 'Materiali scolastici', 'Tutto ci&ograve; che riguarda le lezioni: approfondimenti, testi, verifiche, criteri, ecc.'),(3, 6, 'EX', 'Normativa', 'Documenti ufficiali non prodotti dalla scuola, riguardanti varia normativa in materia'),(4, 7, 'PER', 'Personale', 'Tutto quanto riguarda il personale della scuola'),(5, 7, 'ALU', 'Alunni', 'Tutto quanto riguarda gli alunni della scuola'),(6, 7, 'CTB', 'ContabilitÃƒÂ ', 'Documenti di contabilitÃƒÂ '),(7, 7, 'SIN', 'Comunicazioni sindacali', 'Comunicazioni di sindacato e RSU'),(14, 7, 'SIC', 'Sicurezza nei luoghi di lavoro', 'Atti relativi alla sicurezza nei luoghi di lavoro'),(9, 7, 'OCG', 'Organi collegiali', 'Delibere e tutto quanto riguarda gli organi collegiali della scuola'),(10, 4, 'SCH', 'Schemi e modelli', 'Schemi e modelli utili per il docente'),(11, 7, 'DCI', 'Delibere CI', 'Contiene tutte le delibere del Consiglio d''Istituto'),(15, 7, 'BAN', 'Bandi e gare ', 'Bandi e gare'),(16, 4, 'FOR', 'Formazione docenti', 'Materiali utili per la formazione dei docenti');
CREATE TABLE IF NOT EXISTS `rb_cdc` (  `id_classe` int(11) NOT NULL,  `id_anno` int(11) NOT NULL,  `id_docente` int(11) DEFAULT NULL,  `id_materia` int(11) NOT NULL,  `coordinatore` tinyint(1) NOT NULL DEFAULT '0',  PRIMARY KEY (`id_classe`,`id_anno`,`id_materia`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS `rb_classi` (  `id_classe` int(11) NOT NULL AUTO_INCREMENT,  `anno_corso` int(11) NOT NULL,  `sezione` char(2) CHARACTER SET latin1 NOT NULL,  `anno_scolastico` int(11) NOT NULL,  `tempo_prolungato` tinyint(1) NOT NULL DEFAULT '0',  `sede` tinyint(4) NOT NULL DEFAULT '1',  `musicale` tinyint(4) NOT NULL DEFAULT '0',  `modulo_orario` tinyint(4) NOT NULL DEFAULT '1',  `ordine_di_scuola` int(11) NOT NULL,  `coordinatore` int(11) DEFAULT NULL,  `segretario` int(11) DEFAULT NULL,  PRIMARY KEY (`id_classe`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_classi_modulo` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_modulo` int(11) NOT NULL,  `classe` int(11) NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `unq` (`id_modulo`,`classe`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_classi_supplenza` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_supplenza` int(11) NOT NULL,  `classe` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_allegati_circolari` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_circolare` int(11) NOT NULL,  `file` varchar(250) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_avvisi` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `testo` text NOT NULL,  `data_inserimento` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `data_scadenza` date NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_circolari` (  `id_circolare` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `progressivo` int(11) NOT NULL,  `protocollo` varchar(10) NOT NULL,  `data_circolare` date NOT NULL,  `data_inserimento` datetime NOT NULL,  `owner` int(11) NOT NULL,  `destinatari` text NOT NULL,  `oggetto` text NOT NULL,  `testo` text NOT NULL,  PRIMARY KEY (`id_circolare`),  UNIQUE KEY `unq_numero_circolare` (`anno`,`progressivo`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_eventi` (  `id_evento` int(11) NOT NULL AUTO_INCREMENT,  `abstract` varchar(200) NOT NULL,  `testo` text NOT NULL,  `owner` int(11) NOT NULL,  `data_evento` timestamp NULL DEFAULT NULL,  `data_inserimento` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `data_modifica` timestamp NULL DEFAULT NULL,  `pubblico` tinyint(1) NOT NULL,  `modificabile` tinyint(1) NOT NULL,  `utente_mod` int(11) DEFAULT NULL,  `id_padre` int(11) DEFAULT NULL,  `classe` int(11) DEFAULT NULL,  `has_sons` tinyint(1) NOT NULL DEFAULT '0',  `ordine_di_scuola` tinyint(4) DEFAULT NULL,  PRIMARY KEY (`id_evento`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_files` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `mittente` int(11) NOT NULL,  `destinatario` int(11) NOT NULL,  `file` varchar(100) NOT NULL,  `data_invio` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,  `data_download` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_lettura_circolari` (  `id_circolare` int(11) NOT NULL,  `docente` int(11) NOT NULL,  `letta` tinyint(1) NOT NULL DEFAULT '0',  `data_lettura` datetime DEFAULT NULL,  PRIMARY KEY (`id_circolare`,`docente`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS `rb_com_messages` (  `mid` int(11) NOT NULL AUTO_INCREMENT,  `tid` int(11) NOT NULL,  `sender` int(11) NOT NULL,  `target` int(11) NOT NULL,  `send_timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `read_timestamp` timestamp NULL DEFAULT NULL,  `text` text NOT NULL,  PRIMARY KEY (`mid`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_news` (  `id_news` int(11) NOT NULL AUTO_INCREMENT,  `data` date NOT NULL,  `abstract` varchar(250) NOT NULL,  `testo` text NOT NULL,  `utente` int(11) NOT NULL,  `ora` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  PRIMARY KEY (`id_news`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_system_threads` (  `tid` int(11) NOT NULL,  `anno` int(11) NOT NULL,  `classe` int(11) DEFAULT NULL,  `docenti` int(11) DEFAULT NULL,  `genitori` int(11) DEFAULT NULL,  `alunni` int(11) DEFAULT NULL,  `ata` int(11) DEFAULT NULL,  PRIMARY KEY (`tid`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS `rb_com_threads` (  `tid` int(11) NOT NULL AUTO_INCREMENT,  `owner` int(11) DEFAULT NULL,  `last_message` int(11) DEFAULT NULL,  `system` tinyint(1) NOT NULL DEFAULT '0',  `name` varchar(40) DEFAULT NULL,  `type` char(1) NOT NULL DEFAULT 'C',  `creation` datetime NOT NULL,  PRIMARY KEY (`tid`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_users` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `uid` int(11) NOT NULL,  `table_name` varchar(100) NOT NULL,  `type` varchar(10) NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `unqid` (`table_name`,`uid`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_com_utenti_thread` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `thread` int(11) NOT NULL,  `utente` int(11) NOT NULL,  `last_access` datetime NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_config` (  `variabile` varchar(50) NOT NULL,  `valore` varchar(100) NOT NULL,  `id` int(11) NOT NULL AUTO_INCREMENT,  `readonly` tinyint(1) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=20 ;
INSERT INTO `rb_config` (`variabile`, `valore`, `id`, `readonly`) VALUES('stato_avanzamento_nuove_classi_1', '0', 2, 1),('num_news', '4', 3, 0),('debug', '0', 4, 1),('limite_sufficienza', '6', 5, 0),('software_name', 'e-School+', 11, 1),('software_version', '4.4.115', 12, 1),('installazione_completata', '0', 13, 1),('stato_avanzamento_nuove_classi_2', '0', 18, 1),  ('selected_theme', '4', 19, 1);
CREATE TABLE IF NOT EXISTS `rb_configurazioni` (  `id_configurazione` int(11) NOT NULL AUTO_INCREMENT,  `nome` varchar(250) NOT NULL,  PRIMARY KEY (`id_configurazione`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=2 ;
INSERT INTO `rb_configurazioni` (`id_configurazione`, `nome`) VALUES (1, 'tema');
CREATE TABLE IF NOT EXISTS `rb_configurazioni_utente` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `configurazione` int(11) NOT NULL,  `utente` int(11) NOT NULL,  `valore` varchar(250) NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `unq` (`configurazione`,`utente`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_dati_lezione` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `vacanze` text,  `id_anno` int(11) NOT NULL,  `id_ordine_scuola` int(11) NOT NULL,  `data_inizio_lezioni` date DEFAULT NULL,  `data_termine_lezioni` date DEFAULT NULL,  `sessioni` int(11) DEFAULT NULL,  `data_fine_1_sessione` date DEFAULT NULL,  `data_fine_2_sessione` date DEFAULT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `unq_anno` (`id_anno`,`id_ordine_scuola`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_dati_sostegno` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `alunno` int(11) NOT NULL,  `scuola_provenienza` varchar(150) DEFAULT NULL,  `classe_provenienza` varchar(5) DEFAULT NULL,  `padre` varchar(50) DEFAULT NULL,  `madre` varchar(50) DEFAULT NULL,  `fratelli_sorelle` text,  `altro` text,  `diagnosi` text,  `terapia` tinyint(1) DEFAULT NULL,  `tipo_terapia` varchar(100) DEFAULT NULL,  `difficolta_prevalenti` text,  `tipologia_classe` text,  `profilo` text,  `anno_scolastico` int(11) NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `sost_uniq` (`alunno`,`anno_scolastico`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_docenti` (  `id_docente` int(11) NOT NULL AUTO_INCREMENT,  `materia` int(11) DEFAULT NULL,  `ruolo` char(1) CHARACTER SET latin1 NOT NULL DEFAULT 'S',  `attivo` tinyint(1) NOT NULL DEFAULT '1',  `tipologia_scuola` int(11) NOT NULL DEFAULT '6',  PRIMARY KEY (`id_docente`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_documents` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `data_upload` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `file` varchar(150) NOT NULL,  `dw_counter` int(11) NOT NULL DEFAULT '0',  `doc_type` int(11) NOT NULL,  `abstract` varchar(250) NOT NULL,  `anno_scolastico` smallint(6) NOT NULL,  `owner` smallint(6) DEFAULT NULL,  `ultima_modifica` timestamp NULL DEFAULT NULL,  `categoria` smallint(6) DEFAULT NULL,  `titolo` varchar(200) DEFAULT NULL,  `classe_rif` char(1) DEFAULT NULL,  `materia` smallint(6) DEFAULT NULL,  `link` varchar(200) NOT NULL,  `progetto` int(11) DEFAULT NULL,  `privato` tinyint(1) NOT NULL DEFAULT '0',  `gruppi` varchar(50) DEFAULT NULL,  `evidenziato` timestamp NULL DEFAULT NULL,  `numero_atto` int(11) DEFAULT NULL,  `protocollo` varchar(32) DEFAULT NULL,  `scadenza` date DEFAULT NULL,  `permessi` int(11) DEFAULT NULL,  `progressivo_atto` varchar(11) DEFAULT NULL,  `ordine_scuola` tinyint(4) DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `doc_sub` (`doc_type`,`materia`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_documents_shared` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `id_documento` int(11) NOT NULL,  `classe` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_documents_tags` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_documento` int(11) NOT NULL,  `tid` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_document_types` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `codice` char(2) NOT NULL,  `commento` varchar(100) NOT NULL,  `permessi` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ;
INSERT INTO `rb_document_types` (`id`, `codice`, `commento`, `permessi`) VALUES(1, 'SW', 'Lavori dei ragazzi', 2),(2, 'OD', 'Documenti ufficiali della scuola', 225),(3, 'PG', 'Progetti', 2),(4, 'DD', 'Materiale didattico', 2),(5, 'AM', 'Altri documenti dalla scuola', 225),(6, 'EX', 'Documenti esterni', 225),(7, 'AP', 'Albo pretorio', 225),(8, 'SV', 'Schede di valutazione', 225),(9, 'AS', 'Albo sindacale', 225);
CREATE TABLE IF NOT EXISTS `rb_downloads` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `doc_id` int(11) NOT NULL,  `doc_type` int(11) NOT NULL,  `ip_address` varchar(15) NOT NULL,  `data_dw` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `user` int(11) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_esiti` (  `id_esito` int(11) NOT NULL AUTO_INCREMENT,  `esito` varchar(250) NOT NULL,  `ordine_scuola` int(11) DEFAULT NULL,  `positivo` tinyint(1) NOT NULL,  `classe` int(11) NOT NULL,  `sesso` char(1) NOT NULL,  `desc_pagella` text NOT NULL,  PRIMARY KEY (`id_esito`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=38 ;
INSERT INTO `rb_esiti` (`id_esito`, `esito`, `ordine_scuola`, `positivo`, `classe`, `sesso`, `desc_pagella`) VALUES(1, 'Ammesso alla classe successiva', NULL, 1, 0, 'M', 'è stato ammesso alla classe successiva'),(2, 'Non ammesso alla classe successiva', 0, 0, 0, 'M', 'non è stato ammesso alla classe successiva'),(3, 'Ammesso alla classe seconda', 1, 1, 1, 'M', 'è stato ammesso alla classe seconda'),(4, 'Ammesso alla classe terza', 1, 1, 2, 'M', 'è stato ammesso alla classe terza'),(5, 'Ammesso all''esame di licenza', 1, 1, 3, 'M', 'è stato ammesso all''esame di icenza'),(6, 'Non ammesso all''esame di licenza', 1, 0, 3, 'M', 'non è stato ammesso all''esame di licenza'),(7, 'Licenziato', NULL, 1, 3, 'M', ''),(8, 'Ammessa alla classe successiva', NULL, 1, 0, 'F', 'è stata ammessa alla classe successiva'),(9, 'Non ammessa alla classe successiva', 0, 0, 0, 'F', 'non è stata ammessa alla classe successiva'),(10, 'Ammessa alla classe seconda', 1, 1, 1, 'F', 'è stata ammessa alla classe seconda'),(11, 'Ammessa alla classe terza', 1, 1, 2, 'F', 'è stata ammessa alla classe terza'),(12, 'Ammessa all''esame di licenza', 1, 1, 3, 'F', 'è stata ammessa all''esame di licenza'),(13, 'Non ammessa all''esame di licenza', 1, 0, 3, 'F', 'non è stata ammessa all''esame di licenza'),(14, 'Licenziata', NULL, 1, 3, 'F', ''),(15, 'Non licenziato', NULL, 0, 3, 'M', ''),(16, 'Non licenziata', NULL, 0, 3, 'F', ''),(17, 'Anno non validato', 1, 0, 0, 'M', ''),(18, 'Ammesso alla classe seconda', 2, 1, 1, 'M', 'è stato ammesso alla classe seconda'),(19, 'Ammessa alla classe seconda', 2, 1, 1, 'F', 'è stata ammessa alla classe seconda'),(20, 'Non ammesso alla classe seconda', 2, 0, 1, 'M', 'non è stato ammesso alla classe seconda'),(21, 'Non ammessa alla classe seconda', 2, 0, 1, 'F', 'non è stata ammessa alla classe seconda'),(22, 'Ammesso alla classe terza', 2, 1, 2, 'M', 'è stato ammesso alla classe terza'),(23, 'Ammessa alla classe terza', 2, 1, 2, 'F', 'è stata ammessa alla classe terza'),(24, 'Non ammesso alla classe terza', 2, 0, 2, 'M', 'non è stato ammesso alla classe terza'),(25, 'Non ammessa alla classe terza', 2, 0, 2, 'F', 'non è stata ammessa alla classe terza'),(26, 'Ammesso alla classe quarta', 2, 1, 3, 'M', 'è stato ammesso alla classe quarta'),(27, 'Ammessa alla classe quarta', 2, 1, 3, 'F', 'è stata ammessa alla classe quarta'),(28, 'Non ammesso alla classe quarta', 2, 0, 3, 'M', 'non è stato ammesso alla classe quarta'),(29, 'Non ammessa alla classe quarta', 2, 1, 3, 'F', 'non è stata ammessa alla classe quarta'),(30, 'Ammesso alla classe quinta', 2, 1, 4, 'M', 'è stato ammesso alla classe quinta'),(31, 'Ammessa alla classe quinta', 2, 1, 4, 'F', 'è stata ammessa alla classe quinta'),(32, 'Non ammesso alla classe quinta', 2, 0, 4, 'M', 'non è stato ammesso alla classe quinta'),(33, 'Non ammessa alla classe quinta', 2, 0, 4, 'F', 'non è stata ammessa alla classe quinta'),(34, 'Ammesso alla scuola secondaria di primo grado', 2, 1, 5, 'M', 'è stato ammesso alla scuola secondaria di primo grado'),(35, 'Ammessa alla scuola secondaria di primo grado', 2, 1, 5, 'F', 'è stata ammessa alla scuola secondaria di primo grado'),(36, 'Non ammesso alla classe successiva', 2, 0, 5, 'M', 'non è stato ammesso alla classe successiva'),(37, 'Non ammessa alla classe successiva', 2, 0, 5, 'F', 'non è stata ammessa alla classe successiva');
CREATE TABLE IF NOT EXISTS `rb_esoneri_religione` (  `id_esonero` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `alunno` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `materia_alternativa` tinyint(1) NOT NULL DEFAULT '0',  PRIMARY KEY (`id_esonero`),  UNIQUE KEY `unq_alunno` (`anno`,`alunno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_fc_alunni` (  `id_alunno` int(11) NOT NULL AUTO_INCREMENT,  `nome` varchar(200) NOT NULL,  `cognome` varchar(200) NOT NULL,  `id_classe` int(11) DEFAULT NULL,  `classe_provenienza` int(11) DEFAULT NULL,  `H` tinyint(1) NOT NULL,  `DSA` tinyint(1) NOT NULL,  `BES` tinyint(1) NOT NULL,  `ripetente` tinyint(1) NOT NULL,  `sesso` char(1) NOT NULL,  `voto` float NOT NULL,  `diagnosi_h` int(11) DEFAULT NULL,  `note` text,  `id_archivio` int(11) DEFAULT NULL,  `data_nascita` date DEFAULT NULL,  `luogo_nascita` varchar(200) DEFAULT NULL,  PRIMARY KEY (`id_alunno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_fc_backgrounds` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `colore` varchar(10) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=12 ;
INSERT INTO `rb_fc_backgrounds` (`id`, `colore`) VALUES(1, 'ec9393'),(2, 'f0f694'),(3, 'c5e7e1'),(4, 'd5e0c8'),(5, 'c2a5db'),(6, '94e39f'),(7, 'adadb0'),(8, 'f3e589'),(9, 'd1ffd2'),(10, 'f5def6'),(11, 'e8d6de');
CREATE TABLE IF NOT EXISTS `rb_fc_classi` (  `id_classe` int(11) NOT NULL AUTO_INCREMENT,  `classe_archivio` int(11) DEFAULT NULL,  `descrizione` varchar(2) NOT NULL,  PRIMARY KEY (`id_classe`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_fc_classi_provenienza` (  `id_classe` int(11) NOT NULL AUTO_INCREMENT,  `id_scuola` int(11) NOT NULL,  `descrizione` varchar(3) NOT NULL,  `classe_archivio` int(11) DEFAULT NULL,  PRIMARY KEY (`id_classe`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8mb4 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_fc_nuove_classi` (  `id_classe` int(11) NOT NULL AUTO_INCREMENT,  `classe` int(11) DEFAULT NULL,  `sezione` char(1) NOT NULL,  PRIMARY KEY (`id_classe`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_fc_preferenze_alunni` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `alunno` int(11) NOT NULL,  `preferenza` int(11) NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `unq` (`alunno`,`preferenza`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_fc_scuole_provenienza` (  `id_scuola` int(11) NOT NULL AUTO_INCREMENT,  `codice` varchar(10) NOT NULL,  `descrizione` varchar(100) NOT NULL,  `comprensivo` int(11) NOT NULL DEFAULT '0',  PRIMARY KEY (`id_scuola`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_genitori` (`uid` int(11),`username` varchar(125),`password` varchar(32),`nome` varchar(100),`cognome` varchar(100),`accessi` int(11),`permessi` smallint(6),`last_access` datetime,`previous_access` datetime);
CREATE TABLE IF NOT EXISTS `rb_genitori_figli` (  `id_genitore` int(11) NOT NULL,  `id_alunno` int(11) NOT NULL,  PRIMARY KEY (`id_genitore`,`id_alunno`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS `rb_gestione_scrutini` (  `id_scrutinio` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `sessione` int(11) NOT NULL,  `data_apertura` datetime NOT NULL,  `data_chiusura` datetime NOT NULL,  `stato` int(11) NOT NULL COMMENT '1: aperto; 0: chiuso',  PRIMARY KEY (`id_scrutinio`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_giorni_modulo` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_modulo` int(11) NOT NULL,  `giorno` int(11) NOT NULL COMMENT 'Numeric representation of the day of the week, as in php date function',  `ingresso` time NOT NULL,  `uscita` time NOT NULL,  `inizio_pausa` time DEFAULT NULL,  `durata_pausa` int(11) DEFAULT NULL COMMENT 'in minuti',  `durata_ora` int(11) NOT NULL COMMENT 'in minuti',  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=12 ;
INSERT INTO `rb_giorni_modulo` (`id`, `id_modulo`, `giorno`, `ingresso`, `uscita`, `inizio_pausa`, `durata_pausa`, `durata_ora`) VALUES(1, 1, 1, '08:25:00', '13:25:00', NULL, NULL, 60),(2, 1, 2, '08:25:00', '13:25:00', NULL, NULL, 60),(3, 1, 3, '08:25:00', '13:25:00', NULL, NULL, 60),(4, 1, 4, '08:25:00', '13:25:00', NULL, NULL, 60),(5, 1, 5, '08:25:00', '13:25:00', NULL, NULL, 60),(6, 1, 6, '08:25:00', '13:25:00', NULL, NULL, 60),(7, 2, 1, '08:30:00', '16:30:00', '13:30:00', 60, 60),(8, 2, 2, '08:30:00', '16:30:00', '13:30:00', 60, 60),(9, 2, 3, '08:30:00', '16:30:00', '13:30:00', 60, 60),(10, 2, 4, '08:30:00', '16:30:00', '13:30:00', 60, 60),(11, 2, 5, '08:30:00', '16:30:00', '13:30:00', 60, 60);
CREATE TABLE IF NOT EXISTS `rb_giudizi_parametri_pagella` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_parametro` int(11) NOT NULL,  `giudizio` varchar(200) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_gruppi` (  `gid` int(11) NOT NULL AUTO_INCREMENT,  `nome` varchar(50) NOT NULL,  `codice` char(3) NOT NULL,  `permessi` int(11) NOT NULL,  PRIMARY KEY (`gid`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=13 ;
INSERT INTO `rb_gruppi` (`gid`, `nome`, `codice`, `permessi`) VALUES(1, 'admin', '1', 1),(2, 'docenti', '2', 2),(3, 'ata', '4', 4),(4, 'genitori', '8', 8),(5, 'segreteria', '32', 32),(6, 'dirigenza', '64', 64),(7, 'dsga', '128', 128),(8, 'studenti', '256', 256),(9, 'sp_admin', '512', 512),(10, 'sm_admin', '102', 1024),(11, 'si_admin', '204', 2048),(12, 'ss_admin', '409', 4096);
CREATE TABLE IF NOT EXISTS `rb_gruppi_utente` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `gid` int(11) NOT NULL,  `uid` int(11) NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `unq_doc_gr` (`gid`,`uid`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_impegni` (  `id_impegno` int(11) NOT NULL AUTO_INCREMENT,  `data_assegnazione` timestamp NULL DEFAULT NULL,  `data_inizio` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',  `data_fine` timestamp NULL DEFAULT NULL,  `docente` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `anno` int(11) NOT NULL,  `materia` int(11) NOT NULL,  `descrizione` text NOT NULL,  `note` text,  `tipo` int(11) NOT NULL,  PRIMARY KEY (`id_impegno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_indirizzi_alunni` (  `id_indirizzo` int(11) NOT NULL AUTO_INCREMENT,  `id_alunno` int(11) NOT NULL,  `indirizzo` varchar(200) DEFAULT NULL,  `citta` varchar(50) DEFAULT NULL,  PRIMARY KEY (`id_indirizzo`),  KEY `id_alunno` (`id_alunno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_lettura_pagelle` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_pubblicazione` int(11) NOT NULL,  `alunno` int(11) NOT NULL,  `data_lettura` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `genitore` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_log` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `data_ora` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `utente` int(11) NOT NULL,  `tipo_evento` int(11) NOT NULL,  `numeric1` int(11) DEFAULT NULL,  `numeric2` int(11) DEFAULT NULL,  `text1` text,  `text2` text,  `float1` float DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_materia_alternativa` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `docente` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_materie` (  `id_materia` int(11) NOT NULL AUTO_INCREMENT,  `materia` varchar(200) NOT NULL,  `idpadre` tinyint(4) DEFAULT NULL,  `has_sons` tinyint(1) NOT NULL DEFAULT '0',  `pagella` tinyint(4) NOT NULL DEFAULT '0',  `tipologia_scuola` int(11) NOT NULL,  `posizione_pagella` int(11) DEFAULT NULL,  PRIMARY KEY (`id_materia`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=46 ;
INSERT INTO `rb_materie` (`id_materia`, `materia`, `idpadre`, `has_sons`, `pagella`, `tipologia_scuola`, `posizione_pagella`) VALUES(1, 'Scegli', NULL, 0, 0, 0, NULL),(2, 'Comportamento', NULL, 0, 1, 1, 13),(3, 'Italiano', 12, 0, 1, 1, 1),(4, 'Storia e Geografia', 12, 1, 0, 1, NULL),(5, 'Arte e immagine', NULL, 0, 1, 1, 10),(6, 'Educazione fisica', NULL, 0, 1, 1, 11),(7, 'Tecnologia', NULL, 0, 1, 1, 8),(8, 'Musica', NULL, 0, 1, 1, 9),(9, 'Scienze Matematiche', NULL, 1, 0, 1, NULL),(10, 'Inglese', NULL, 0, 1, 1, 2),(11, 'Francese', NULL, 0, 1, 1, 3),(12, 'Lettere', NULL, 3, 0, 1, NULL),(13, 'Strumento', NULL, 1, 1, 1, NULL),(14, 'Storia', 12, 0, 1, 1, 4),(15, 'Geografia', 12, 0, 1, 1, 5),(16, 'Matematica', 9, 0, 1, 1, 6),(17, 'Scienze', 9, 0, 1, 1, 7),(21, 'Chitarra', 13, 0, 0, 1, NULL),(22, 'Violino', 13, 0, 0, 1, NULL),(23, 'Flauto', 13, 0, 0, 1, NULL),(24, 'Pianoforte', 13, 0, 0, 1, NULL),(25, 'Approfondimento materie letterarie', 12, 0, 0, 1, NULL),(26, 'Religione', NULL, 0, 1, 1, 12),(27, 'Sostegno', NULL, 0, 0, 1, NULL),(28, 'Italiano', 39, 0, 1, 2, 1),(29, 'Matematica', 39, 0, 1, 2, 2),(30, 'Religione', 39, 0, 1, 2, 19),(31, 'Immagine', 39, 0, 1, 2, 3),(32, 'Inglese', 39, 0, 1, 2, 4),(33, 'Sostituzione', NULL, 0, 0, 0, NULL),(34, 'Storia', 39, 0, 1, 2, 5),(35, 'Geografia', 39, 0, 1, 2, 6),(36, 'Motoria', 39, 0, 1, 2, 7),(37, 'Scienze', 39, 0, 1, 2, 8),(38, 'Musica', 39, 0, 1, 2, 9),(39, 'Posto comune', NULL, 12, 0, 2, NULL),(40, 'Comportamento', NULL, 0, 1, 2, 20),(41, 'Sostegno', NULL, 0, 0, 2, NULL),(42, 'Tecnologia', 39, 0, 1, 2, 10),(43, 'Posto comune', NULL, 0, 0, 3, NULL),(44, 'Sostegno', NULL, 0, 0, 3, NULL),(45, 'Mensa', 39, 0, 0, 2, NULL);
CREATE TABLE IF NOT EXISTS `rb_modules` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `name` varchar(100) NOT NULL,  `depends_to` varchar(50) DEFAULT NULL,  `active` tinyint(1) NOT NULL,  `code_name` varchar(20) NOT NULL,  `code_value` int(11) NOT NULL,  `type` int(11) NOT NULL,  `home` varchar(250) NOT NULL,  `lib_home` varchar(250) NOT NULL,  `front_page` varchar(250) NOT NULL,  `path_to_root` varchar(250) NOT NULL,  `lib_to_root` varchar(20) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=13 ;
INSERT INTO `rb_modules` (`id`, `name`, `depends_to`, `active`, `code_name`, `code_value`, `type`, `home`, `lib_home`, `front_page`, `path_to_root`, `lib_to_root`) VALUES(1, 'registro di classe', NULL, 1, 'reg_cls', 1, 1, 'intranet/teachers/registro_classe', 'lib', 'registro_classe.php', '', ''),(2, 'registro personale', '1', 1, 'reg_pers', 2, 1, 'intranet/teachers/registro_personale', 'lib', 'index.php', '', ''),(3, 'gestione della classe', '1,2', 1, 'gest_cls', 4, 1, 'intranet/teachers/gestione_classe', 'lib', 'index.php', '', ''),(4, 'documenti', '1', 1, 'docs', 8, 1, 'modules/documents', 'modules/documents/lib', 'index.php', '../../', '../../../'),(5, 'workflow', '1', 0, 'wflow', 16, 1, '', '', '', '', ''),(6, 'comunicazioni', '1', 1, 'com', 32, 1, 'modules/communication', 'modules/communication/lib', 'index.php', '../../', '../../../'),(7, 'area docenti', NULL, 1, 'teachers', 64, 2, 'intranet/teachers', 'lib', 'index.php', '', ''),(8, 'alunni', NULL, 1, 'students', 128, 2, 'intranet/alunni', 'lib', 'index.php', '', ''),(9, 'progetti', NULL, 0, 'projects', 256, 1, '', '', '', '', ''),(10, 'genitori', NULL, 1, 'parents', 512, 2, 'intranet/genitori', 'lib', 'index.php', '', ''),(11, 'albo', '4', 1, 'albo', 1024, 1, '', '', '', '', ''),(12, 'classi prime', NULL, 1, 'fc', 2048, 1, 'modules/fc', 'modules/fc/lib', 'index.php', '../../', '../../../');
CREATE TABLE IF NOT EXISTS `rb_moduli_orario` (  `id_modulo` int(11) NOT NULL AUTO_INCREMENT,  `giorni` int(11) NOT NULL,  `ore_settimanali` int(11) NOT NULL,  PRIMARY KEY (`id_modulo`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;
INSERT INTO `rb_moduli_orario` (`id_modulo`, `giorni`, `ore_settimanali`) VALUES(1, 6, 30),(2, 5, 40);
CREATE TABLE IF NOT EXISTS `rb_moduli_primaria` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_note_didattiche` (  `id_nota` int(11) NOT NULL AUTO_INCREMENT,  `docente` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `alunno` int(11) NOT NULL,  `tipo` int(11) NOT NULL,  `materia` int(11) NOT NULL,  `anno` int(11) NOT NULL,  `data` date NOT NULL,  `note` text,  PRIMARY KEY (`id_nota`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_note_disciplinari` (  `id_nota` int(11) NOT NULL AUTO_INCREMENT,  `docente` int(11) NOT NULL,  `data` date NOT NULL,  `classe` int(11) NOT NULL,  `alunno` int(11) DEFAULT NULL,  `tipo` smallint(6) NOT NULL DEFAULT '1',  `descrizione` text NOT NULL,  `sanzione` varchar(200) DEFAULT NULL,  `anno` int(11) NOT NULL,  PRIMARY KEY (`id_nota`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_obiettivi` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `nome` text NOT NULL,  `descrizione` text,  `docente` int(11) DEFAULT NULL,  `materia` int(11) NOT NULL,  `ordine_scuola` int(11) NOT NULL,  `id_padre` int(11) DEFAULT NULL,  `anno` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_obiettivi_classe` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_obiettivo` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `anno` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_obiettivi_verifica` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_obiettivo` int(11) NOT NULL,  `id_verifica` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_orario` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `giorno` varchar(20) NOT NULL,  `ora` tinyint(4) NOT NULL,  `inizio_ora` time NOT NULL,  `classe` smallint(6) NOT NULL,  `materia` smallint(4) NOT NULL DEFAULT '1',  `materia2` tinyint(4) DEFAULT NULL,  `sostegno` tinyint(1) NOT NULL DEFAULT '0',  `sostegno2` int(11) DEFAULT NULL,  `anno` int(11) NOT NULL,  `docente` int(11) DEFAULT NULL,  `descrizione` varchar(20) DEFAULT NULL,  PRIMARY KEY (`id`),  KEY `uniq_ora` (`giorno`,`ora`,`classe`),  KEY `docente` (`docente`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_pagelle` (  `id_pagella` int(11) NOT NULL AUTO_INCREMENT,  `id_pubblicazione` int(11) NOT NULL,  `id_alunno` int(11) NOT NULL,  `id_classe` int(11) NOT NULL,  `desc_classe` char(2) NOT NULL,  `esito` varchar(250) DEFAULT NULL,  `id_file` varchar(120) DEFAULT NULL,  PRIMARY KEY (`id_pagella`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_parametri_configurabili` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `nome` varchar(100) NOT NULL,  `codice` varchar(100) NOT NULL,  `descrizione` text NOT NULL,  `tabella_dati` varchar(100) DEFAULT NULL,  `permessi` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;
INSERT INTO `rb_parametri_configurabili` (`id`, `nome`, `codice`, `descrizione`, `tabella_dati`, `permessi`) VALUES(1, 'Tipologia prove', 'tipologia_prove', 'Tipologie di prove tra le quali il docente puo` scegliere, per visualizzarle nel proprio registro personale', 'rb_tipologia_prove', 2),(2, 'Attivazione registro per obiettivi', 'registro_obiettivi', 'Flag che indica se il registro personale del docente per obiettivi e` attivo o no', NULL, 2);
CREATE TABLE IF NOT EXISTS `rb_parametri_pagella` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `nome` varchar(200) NOT NULL,  `ordine_scuola` tinyint(4) NOT NULL,  `quadrimestre` int(11) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_parametri_utente` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_utente` int(11) NOT NULL,  `id_parametro` int(11) NOT NULL,  `valore` text NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_profili` (  `id` int(11) NOT NULL,  `data_nascita` varchar(20) DEFAULT NULL,  `indirizzo` varchar(150) DEFAULT NULL,  `telefono` varchar(30) DEFAULT NULL,  `cellulare` varchar(30) DEFAULT NULL,  `email` varchar(100) DEFAULT NULL,  `messenger` varchar(50) DEFAULT NULL,  `web` varchar(120) DEFAULT NULL,  `blog` varchar(120) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS `rb_profili_alunni` (  `id_alunno` int(11) NOT NULL AUTO_INCREMENT,  `email` varchar(100) DEFAULT NULL,  `messenger` varchar(100) DEFAULT NULL,  `blog` varchar(100) DEFAULT NULL,  PRIMARY KEY (`id_alunno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_progetti` (  `id_progetto` smallint(6) NOT NULL AUTO_INCREMENT,  `nome` varchar(250) NOT NULL,  `descrizione` text NOT NULL,  `anno_inizio` tinyint(4) NOT NULL,  `classi` varchar(50) NOT NULL,  `sede` tinyint(4) NOT NULL,  `referenti` varchar(35) NOT NULL,  `attivo` tinyint(1) NOT NULL DEFAULT '1',  `sito` varchar(250) DEFAULT NULL,  PRIMARY KEY (`id_progetto`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_progressivi_albo` (  `progressivo_atto` int(11) NOT NULL,  `anno` int(11) NOT NULL,  `id` int(11) NOT NULL AUTO_INCREMENT,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_pubblicazione_pagelle` (  `id_pagella` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `quadrimestre` int(11) NOT NULL,  `data_pubblicazione` date DEFAULT NULL,  `ora_pubblicazione` time DEFAULT NULL,  `stato_scrutinio` int(11) DEFAULT '2',  `disponibili_docenti` date DEFAULT NULL,  `data_pubblicazione_sp` date DEFAULT NULL,  `ora_pubblicazione_sp` time DEFAULT NULL,  `stato_scrutinio_sp` tinyint(4) DEFAULT NULL,  `disponibili_docenti_sp` date DEFAULT NULL,  PRIMARY KEY (`id_pagella`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_recupero_password` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `utente` int(11) NOT NULL,  `gruppo` int(11) NOT NULL,  `token` varchar(32) NOT NULL,  `data_richiesta` datetime NOT NULL,  `data_scadenza_token` datetime NOT NULL,  PRIMARY KEY (`id`),  UNIQUE KEY `token` (`token`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_registri_personali` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `anno` int(11) NOT NULL,  `docente` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `materia` int(11) DEFAULT NULL,  `file` varchar(40) DEFAULT NULL,  `data_creazione` date DEFAULT NULL,  `alunno` int(11) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_reg_alunni` (  `id_registro` int(11) NOT NULL,  `id_alunno` int(11) NOT NULL,  `ingresso` time DEFAULT NULL,  `uscita` time DEFAULT NULL,  `note` text,  `giustificata` date DEFAULT NULL,  `id_classe` int(11) DEFAULT NULL COMMENT 'contiene l''id classe attuale dell''alunno (potrebbe essere variata in corso d''anno)',  PRIMARY KEY (`id_registro`,`id_alunno`)) ENGINE=InnoDB DEFAULT CHARSET=utf8;
CREATE TABLE IF NOT EXISTS `rb_reg_classi` (  `id_reg` int(11) NOT NULL AUTO_INCREMENT,  `id_classe` smallint(6) NOT NULL,  `id_anno` smallint(6) NOT NULL,  `data` date NOT NULL,  `ingresso` time NOT NULL DEFAULT '08:30:00',  `uscita` time NOT NULL DEFAULT '13:30:00',  PRIMARY KEY (`id_reg`),  UNIQUE KEY `get_idreg` (`id_classe`,`id_anno`,`data`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_reg_firme` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_registro` int(11) NOT NULL,  `ora` tinyint(4) NOT NULL,  `firma` varchar(25) CHARACTER SET latin1 DEFAULT NULL,  `docente` int(11) DEFAULT NULL,  `materia` int(11) DEFAULT NULL,  `docente_compresenza` int(11) DEFAULT NULL,  `materia_compresenza` int(11) DEFAULT NULL,  `argomento` text,  `anno` int(11) NOT NULL,  PRIMARY KEY (`id`),  KEY `idx_regora` (`id_registro`,`ora`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_reg_firme_sostegno` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_registro` int(11) NOT NULL,  `id_ora` int(11) NOT NULL,  `ora` int(11) NOT NULL,  `anno` int(11) NOT NULL,  `classe` int(11) NOT NULL,  `docente` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_reg_personale` (  `ID` int(11) NOT NULL AUTO_INCREMENT,  `id_reg` int(11) NOT NULL DEFAULT '0',  `docente` int(11) NOT NULL,  `ora` smallint(6) NOT NULL,  `materia` smallint(6) NOT NULL,  PRIMARY KEY (`ID`),  UNIQUE KEY `idx_ora` (`id_reg`,`docente`,`ora`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_riunioni_programmazione` (  `id_riunione` int(11) NOT NULL AUTO_INCREMENT,  `id_modulo` int(11) NOT NULL,  `data` date NOT NULL,  `ora_inizio` time NOT NULL,  `ora_termine` time NOT NULL,  `assenti` text,  `italiano` text,  `matematica` text,  `religione` text,  `immagine` text,  `inglese` text,  `storia` text,  `geografia` text,  `motoria` text,  `scienze` text,  `musica` text,  `tecnologia` text,  `altro` text,  PRIMARY KEY (`id_riunione`),  UNIQUE KEY `unq` (`id_modulo`,`data`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_scrutini` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `alunno` int(11) DEFAULT NULL,  `classe` smallint(6) DEFAULT NULL,  `anno` smallint(6) DEFAULT NULL,  `quadrimestre` smallint(6) DEFAULT NULL,  `materia` smallint(6) DEFAULT NULL,  `voto` smallint(6) DEFAULT NULL,  `assenze` smallint(6) DEFAULT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_sedi` (  `id_sede` smallint(6) NOT NULL AUTO_INCREMENT,  `nome` varchar(200) NOT NULL,  `indirizzo` varchar(200) DEFAULT NULL,  `ordine_di_scuola` int(11) NOT NULL DEFAULT '0',  PRIMARY KEY (`id_sede`),  UNIQUE KEY `nome` (`nome`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_stati_scrutinio` (  `id_stato` int(11) NOT NULL AUTO_INCREMENT,  `stato` varchar(50) NOT NULL,  PRIMARY KEY (`id_stato`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;
INSERT INTO `rb_stati_scrutinio` (`id_stato`, `stato`) VALUES(1, 'Chiuso'),(2, 'Aperto'),(3, 'Riaperto');
CREATE TABLE IF NOT EXISTS `rb_stud_works` (  `id_work` int(11) NOT NULL AUTO_INCREMENT,  `anno` char(9) NOT NULL,  `data_inserimento` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `autore` varchar(200) NOT NULL,  `classe` int(11) DEFAULT NULL,  `owner` int(11) NOT NULL,  `abstract` text NOT NULL,  `titolo` varchar(200) NOT NULL,  `file` varchar(100) NOT NULL,  `dw_counter` int(11) NOT NULL DEFAULT '0',  `_classe` varchar(25) DEFAULT NULL,  PRIMARY KEY (`id_work`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_supplenze` (  `id_supplenza` int(11) NOT NULL AUTO_INCREMENT,  `id_supplente` int(11) NOT NULL,  `id_docente_assente` int(11) NOT NULL,  `ordine_di_scuola` int(11) NOT NULL,  `data_inizio_supplenza` date NOT NULL,  `data_fine_supplenza` date NOT NULL,  `anno` int(11) NOT NULL,  PRIMARY KEY (`id_supplenza`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_tags` (  `tid` int(11) NOT NULL AUTO_INCREMENT,  `tag` varchar(75) NOT NULL,  PRIMARY KEY (`tid`),  UNIQUE KEY `tag` (`tag`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_telefoni_alunni` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_alunno` int(11) NOT NULL,  `telefono` varchar(25) NOT NULL,  `descrizione` text NOT NULL,  `principale` tinyint(1) DEFAULT '0',  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_themes` (  `id_tema` int(11) NOT NULL AUTO_INCREMENT,  `nome` varchar(100) NOT NULL,  `directory` varchar(100) NOT NULL,  `image` varchar(50) NOT NULL,  PRIMARY KEY (`id_tema`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=10 ;
INSERT INTO `rb_themes` (`id_tema`, `nome`, `directory`, `image`) VALUES(1, 'Red and blue', 'blue_red', 'bluered.png'),(2, 'Orange and blue', 'blue_orange', 'blueorange.png'),(3, 'Blue Gray', 'bluegray', 'bluegray.png'),(4, 'Indigo', 'indigo', 'indigo.png'),(5, 'Cyan', 'cyan', 'cyan.png'),(6, 'Pink', 'pink', 'pink.png'),(7, 'Light Blue', 'light_blue', 'light_blue.png'),(8, 'Teal', 'teal', 'teal.png'),(9, 'Purple', 'purple', 'purple.png');
CREATE TABLE IF NOT EXISTS `rb_tipievento_log` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `tipo` varchar(250) NOT NULL,  `descrizione` text NOT NULL,  `numeric1` text,  `numeric2` text NOT NULL,  `text1` text NOT NULL,  `text2` text NOT NULL,  `float1` text NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ;
INSERT INTO `rb_tipievento_log` (`id`, `tipo`, `descrizione`, `numeric1`, `numeric2`, `text1`, `text2`, `float1`) VALUES(1, 'Cancellazione documento albo', 'Evento che scatta alla cancellazione di un documento pubblicato all''albo, per poter giustificare il "buco" nell''indice numerico progressivo annuale', 'Id del documento (da rb_documents.id_doc)', 'Anno di pubblicazione del documento cancellato', 'Progressivo del documento (da rb_documents.progressivo_atto)', '', ''),(2, 'Login fallito', 'Evento generato da un tentativo di login fallito', 'Area del tentativo di accesso (genitori, studenti, scuola)', 'NULL', 'IP address', 'username utilizzata', ''),(3, 'Modifica voto di scrutinio', 'Evento di modifica di un voto di scrutinio da parte di un docente non titolare del voto (coordinatore di classe, ...)', 'ID del voto modificato', 'NULL', 'IP address del docente che modifica', 'NULL', 'Voto precedente'),(4, 'Modifica voto', 'Evento di modifica di un voto ', 'ID voto modificato', 'NULL', 'IP Address', 'NULL', 'Voto precedente');
CREATE TABLE IF NOT EXISTS `rb_tipi_note_didattiche` (  `id_tiponota` int(11) NOT NULL AUTO_INCREMENT,  `descrizione` varchar(200) NOT NULL,  PRIMARY KEY (`id_tiponota`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=8 ;
INSERT INTO `rb_tipi_note_didattiche` (`id_tiponota`, `descrizione`) VALUES(1, 'Impreparato'),(2, 'Non ha l''attrezzatura'),(3, 'Risposta corretta'),(4, 'Risposta errata o assente'),(5, 'Non segue la lezione'),(6, 'Non ha fatto i compiti'),(7, 'Non lavora');
CREATE TABLE IF NOT EXISTS `rb_tipi_note_disciplinari` (  `id_tiponota` int(11) NOT NULL AUTO_INCREMENT,  `descrizione` text,  PRIMARY KEY (`id_tiponota`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=15 ;
INSERT INTO `rb_tipi_note_disciplinari` (`id_tiponota`, `descrizione`) VALUES(1, 'Nota del docente'),(11, 'Nota del Consiglio di classe'),(12, 'Ammonizione del Consiglio di classe'),(13, 'Ammonizione del Dirigente'),(14, 'Sospensione'),(2, 'Annotazione');
CREATE TABLE IF NOT EXISTS `rb_tipologia_prove` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `tipologia` varchar(75) NOT NULL,  `label` varchar(75) NOT NULL,  `default` tinyint(1) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;
INSERT INTO `rb_tipologia_prove` (`id`, `tipologia`, `label`, `default`) VALUES(1, 'Verifica scritta', 'Scritti', 1),(2, 'Verifica orale', 'Orali', 1),(3, 'Prova pratica', 'Prove pratiche', 0);
CREATE TABLE IF NOT EXISTS `rb_tipologia_scuola` (  `id_tipo` int(11) NOT NULL AUTO_INCREMENT,  `tipo` varchar(200) NOT NULL,  `codice` char(2) NOT NULL,  `has_admin` tinyint(1) NOT NULL,  `attivo` int(11) NOT NULL,  PRIMARY KEY (`id_tipo`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;
INSERT INTO `rb_tipologia_scuola` (`id_tipo`, `tipo`, `codice`, `has_admin`, `attivo`) VALUES(1, 'Scuola secondaria di primo grado', 'SM', 1, 1),(2, 'Scuola primaria', 'SP', 1, 1),(3, 'Scuola dell''infanzia', 'SI', 1, 1),(4, 'Istituto comprensivo', 'IC', 0, 1),(5, 'Scuola secondaria di II grado', 'SS', 0, 0),(6, 'Scegli', '', 0, 0);
CREATE TABLE IF NOT EXISTS `rb_utenti` (  `uid` int(11) NOT NULL AUTO_INCREMENT,  `username` varchar(125) NOT NULL,  `password` varchar(32) CHARACTER SET latin1 NOT NULL,  `nome` varchar(100) NOT NULL,  `cognome` varchar(100) NOT NULL,  `accessi` int(11) NOT NULL DEFAULT '0',  `permessi` smallint(6) NOT NULL,  `last_access` datetime DEFAULT NULL,  `previous_access` datetime DEFAULT NULL,  `attivo` tinyint(1) NOT NULL DEFAULT '1',  PRIMARY KEY (`uid`),  UNIQUE KEY `username` (`username`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_valutazione_parametri_pagella` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `studente` int(11) NOT NULL,  `anno` int(11) NOT NULL,  `quadrimestre` int(11) NOT NULL,  `parametro` int(11) NOT NULL,  `giudizio` int(11) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_vclassi_s1` (`id_classe` int(11),`anno_corso` int(11),`sezione` char(2),`anno_scolastico` int(11),`tempo_prolungato` tinyint(1),`sede` tinyint(4),`musicale` tinyint(4),`modulo_orario` tinyint(4),`ordine_di_scuola` int(11),`coordinatore` int(11),`segretario` int(11));
CREATE TABLE IF NOT EXISTS `rb_verifiche` (  `id_verifica` int(11) NOT NULL AUTO_INCREMENT,  `id_docente` int(11) NOT NULL,  `id_classe` int(11) NOT NULL,  `id_anno` int(11) NOT NULL,  `data_verifica` date DEFAULT NULL,  `data_assegnazione` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `id_materia` smallint(6) NOT NULL,  `valutata` tinyint(1) NOT NULL DEFAULT '0',  `id_attivita` int(11) DEFAULT NULL,  `prova` text NOT NULL,  `argomento` text NOT NULL,  `note` text,  `tipologia` int(11) NOT NULL DEFAULT '1',  PRIMARY KEY (`id_verifica`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_visite` (  `id_visita` int(11) NOT NULL AUTO_INCREMENT,  `data_ora` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `ip_address` varchar(15) NOT NULL,  `id_utente` int(11) NOT NULL,  `page` int(11) NOT NULL,  `uri` text NOT NULL,  `permessi` int(11) DEFAULT NULL,  PRIMARY KEY (`id_visita`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_vmaterie_orario` (`id_materia` int(11),`materia` varchar(200),`idpadre` tinyint(4),`has_sons` tinyint(1),`pagella` tinyint(4),`tipologia_scuola` int(11));-- --------------------------------------------------------
CREATE TABLE IF NOT EXISTS `rb_voti` (  `id_voto` int(11) NOT NULL AUTO_INCREMENT,  `alunno` int(11) NOT NULL,  `docente` int(11) NOT NULL,  `materia` int(11) NOT NULL,  `anno` int(11) NOT NULL,  `voto` float NOT NULL,  `modificatori` varchar(10) DEFAULT NULL,  `descrizione` varchar(200) NOT NULL,  `tipologia` tinyint(1) NOT NULL DEFAULT '1',  `note` text,  `data_voto` date NOT NULL,  `argomento` text NOT NULL,  `id_verifica` int(11) DEFAULT NULL,  `privato` int(11) NOT NULL DEFAULT '0',  `from_file` text COMMENT 'debug per risolvere problema dellla duplicazione dei voti',  `inserimento` timestamp NULL DEFAULT NULL,  PRIMARY KEY (`id_voto`),  KEY `media_voto` (`alunno`,`materia`,`anno`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_voti_obiettivo` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_voto` int(11) NOT NULL,  `obiettivo` int(11) NOT NULL,  `voto` tinyint(4) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_w_status` (  `id_status` smallint(6) NOT NULL AUTO_INCREMENT,  `nome` varchar(50) NOT NULL,  `permessi` smallint(50) DEFAULT NULL,  PRIMARY KEY (`id_status`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_w_step` (  `id_step` smallint(6) NOT NULL AUTO_INCREMENT,  `descrizione` varchar(200) NOT NULL,  `ufficio` smallint(6) NOT NULL,  PRIMARY KEY (`id_step`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_w_step_richieste` (  `id` int(11) NOT NULL AUTO_INCREMENT,  `id_richiesta` int(11) NOT NULL COMMENT 'tabella w_richieste',  `id_step` smallint(6) NOT NULL COMMENT 'tabella w_step',  `data_inoltro` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,  `note` text,  `id_operatore` int(11) DEFAULT NULL COMMENT 'tabella utenti, operatore che realizza lo step',  PRIMARY KEY (`id`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_w_uffici` (  `id_ufficio` smallint(6) NOT NULL AUTO_INCREMENT,  `nome` varchar(50) NOT NULL,  `codice_permessi` int(11) NOT NULL,  PRIMARY KEY (`id_ufficio`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb_w_workflow` (  `id_workflow` smallint(6) NOT NULL AUTO_INCREMENT,  `richiesta` varchar(250) NOT NULL,  `num_step` smallint(6) NOT NULL,  `codice_step` varchar(50) NOT NULL,  `gruppi` smallint(6) NOT NULL,  PRIMARY KEY (`id_workflow`)) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
CREATE TABLE IF NOT EXISTS `rb__classi` (  `id_classe` int(11) NOT NULL AUTO_INCREMENT,  `anno_creazione` int(11) NOT NULL,  `annocorso_creazione` int(11) NOT NULL,  `attiva` tinyint(1) NOT NULL DEFAULT '1',  `sezione` char(1) NOT NULL,  `ordine` int(11) NOT NULL,  PRIMARY KEY (`id_classe`)) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;
DROP TABLE IF EXISTS `rb_genitori`;
CREATE VIEW `rb_genitori` AS select `rb_utenti`.`uid` AS `uid`,`rb_utenti`.`username` AS `username`,`rb_utenti`.`password` AS `password`,`rb_utenti`.`nome` AS `nome`,`rb_utenti`.`cognome` AS `cognome`,`rb_utenti`.`accessi` AS `accessi`,`rb_utenti`.`permessi` AS `permessi`,`rb_utenti`.`last_access` AS `last_access`,`rb_utenti`.`previous_access` AS `previous_access` from (`rb_utenti` join `rb_gruppi_utente`) where ((`rb_utenti`.`uid` = `rb_gruppi_utente`.`uid`) and (`rb_gruppi_utente`.`gid` = 4));
DROP TABLE IF EXISTS `rb_vclassi_s1`;
CREATE VIEW `rb_vclassi_s1` AS select `rb_classi`.`id_classe` AS `id_classe`,`rb_classi`.`anno_corso` AS `anno_corso`,`rb_classi`.`sezione` AS `sezione`,`rb_classi`.`anno_scolastico` AS `anno_scolastico`,`rb_classi`.`tempo_prolungato` AS `tempo_prolungato`,`rb_classi`.`sede` AS `sede`,`rb_classi`.`musicale` AS `musicale`,`rb_classi`.`modulo_orario` AS `modulo_orario`,`rb_classi`.`ordine_di_scuola` AS `ordine_di_scuola`,`rb_classi`.`coordinatore` AS `coordinatore`,`rb_classi`.`segretario` AS `segretario` from `rb_classi` where (`rb_classi`.`ordine_di_scuola` = 1);
DROP TABLE IF EXISTS `rb_vclassi_s2`;
CREATE VIEW `rb_vclassi_s2` AS select `rb_classi`.`id_classe` AS `id_classe`,`rb_classi`.`anno_corso` AS `anno_corso`,`rb_classi`.`sezione` AS `sezione`,`rb_classi`.`anno_scolastico` AS `anno_scolastico`,`rb_classi`.`tempo_prolungato` AS `tempo_prolungato`,`rb_classi`.`sede` AS `sede`,`rb_classi`.`musicale` AS `musicale`,`rb_classi`.`modulo_orario` AS `modulo_orario`,`rb_classi`.`ordine_di_scuola` AS `ordine_di_scuola`,`rb_classi`.`coordinatore` AS `coordinatore`,`rb_classi`.`segretario` AS `segretario` from `rb_classi` where (`rb_classi`.`ordine_di_scuola` = 2);
DROP TABLE IF EXISTS `rb_vclassi_s3`;
CREATE VIEW `rb_vclassi_s3` AS select `rb_classi`.`id_classe` AS `id_classe`,`rb_classi`.`anno_corso` AS `anno_corso`,`rb_classi`.`sezione` AS `sezione`,`rb_classi`.`anno_scolastico` AS `anno_scolastico`,`rb_classi`.`tempo_prolungato` AS `tempo_prolungato`,`rb_classi`.`sede` AS `sede`,`rb_classi`.`musicale` AS `musicale`,`rb_classi`.`modulo_orario` AS `modulo_orario`,`rb_classi`.`ordine_di_scuola` AS `ordine_di_scuola`,`rb_classi`.`coordinatore` AS `coordinatore`,`rb_classi`.`segretario` AS `segretario` from `rb_classi` where (`rb_classi`.`ordine_di_scuola` = 3);
DROP TABLE IF EXISTS `rb_vclassi_s5`;
CREATE VIEW `rb_vclassi_s5` AS select `rb_classi`.`id_classe` AS `id_classe`,`rb_classi`.`anno_corso` AS `anno_corso`,`rb_classi`.`sezione` AS `sezione`,`rb_classi`.`anno_scolastico` AS `anno_scolastico`,`rb_classi`.`tempo_prolungato` AS `tempo_prolungato`,`rb_classi`.`sede` AS `sede`,`rb_classi`.`musicale` AS `musicale`,`rb_classi`.`modulo_orario` AS `modulo_orario`,`rb_classi`.`ordine_di_scuola` AS `ordine_di_scuola`,`rb_classi`.`coordinatore` AS `coordinatore`,`rb_classi`.`segretario` AS `segretario` from `rb_classi` where (`rb_classi`.`ordine_di_scuola` = 5);
DROP TABLE IF EXISTS `rb_vmaterie_orario`;
CREATE VIEW `rb_vmaterie_orario` AS select `rb_materie`.`id_materia` AS `id_materia`,`rb_materie`.`materia` AS `materia`,`rb_materie`.`idpadre` AS `idpadre`,`rb_materie`.`has_sons` AS `has_sons`,`rb_materie`.`pagella` AS `pagella`,`rb_materie`.`tipologia_scuola` AS `tipologia_scuola` from `rb_materie` where ((`rb_materie`.`id_materia` <> 2) and (`rb_materie`.`id_materia` <> 27) and ((`rb_materie`.`idpadre` <> 13) or isnull(`rb_materie`.`idpadre`)));
